<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="ë§¤ì¼ ìš´ë™ì„ ê¸°ë¡í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì›¹ì•±">
    <meta name="theme-color" content="#3498db">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ìš´ë™ ê¸°ë¡">
    <title>ğŸ’ª ìš´ë™ ê¸°ë¡ ì•±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .date-selector {
            text-align: center;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .date-selector button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .date-selector button:hover {
            background-color: #2980b9;
        }

        .date-selector span {
            font-size: 18px;
            font-weight: bold;
            min-width: 120px;
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .exercise-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .exercise-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .exercise-card.active {
            background-color: #3498db;
            color: white;
        }

        .exercise-card h3 {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .exercise-card p {
            font-size: 16px;
            opacity: 0.8;
        }

        .count-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .exercise-card.active .count-badge {
            background-color: white;
            color: #3498db;
        }

        .daily-record {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .daily-record h2 {
            font-size: 22px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .record-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .record-item:last-child {
            border-bottom: none;
        }

        .record-item .exercise-name {
            font-weight: 500;
        }

        .record-item .exercise-count {
            color: #3498db;
            font-weight: bold;
        }

        .total-summary {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .total-summary h2 {
            font-size: 22px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-item .total-count {
            color: #2ecc71;
            font-weight: bold;
        }

        .stats {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .stats h2 {
            font-size: 22px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .reset-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
        }

        .reset-button:hover {
            background-color: #c0392b;
        }

        @media (min-width: 768px) {
            .exercise-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .instructions {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            font-size: 14px;
            color: #7f8c8d;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’ª ìš´ë™ ê¸°ë¡ ì•±</h1>
        
        <div class="instructions">
            ğŸ’¡ ì¢Œí´ë¦­ìœ¼ë¡œ ìš´ë™ ì¶”ê°€, ìš°í´ë¦­ìœ¼ë¡œ ìš´ë™ ë¹¼ê¸°
        </div>
        
        <div class="date-selector">
            <button onclick="changeDate(-1)">â—€</button>
            <span id="currentDate"></span>
            <button onclick="changeDate(1)">â–¶</button>
        </div>

        <div class="exercise-grid">
            <div class="exercise-card" onclick="incrementExercise('running', this)" oncontextmenu="decrementExercise('running', this); return false;">
                <h3>ğŸƒ ëŸ°ë‹</h3>
                <p>10ë¶„</p>
                <span class="count-badge" id="running-count">0</span>
            </div>
            
            <div class="exercise-card" onclick="incrementExercise('pushup', this)" oncontextmenu="decrementExercise('pushup', this); return false;">
                <h3>ğŸ’ª íŒ”êµ½í˜€í´ê¸°</h3>
                <p>10íšŒ</p>
                <span class="count-badge" id="pushup-count">0</span>
            </div>
            
            <div class="exercise-card" onclick="incrementExercise('squat', this)" oncontextmenu="decrementExercise('squat', this); return false;">
                <h3>ğŸ¦µ ìŠ¤ì¿¼íŠ¸</h3>
                <p>10íšŒ</p>
                <span class="count-badge" id="squat-count">0</span>
            </div>
            
            <div class="exercise-card" onclick="incrementExercise('situp', this)" oncontextmenu="decrementExercise('situp', this); return false;">
                <h3>ğŸ§˜ ìœ—ëª¸ì¼ìœ¼í‚¤ê¸°</h3>
                <p>20íšŒ</p>
                <span class="count-badge" id="situp-count">0</span>
            </div>
        </div>

        <div class="daily-record">
            <h2>ğŸ“ ì˜¤ëŠ˜ì˜ ê¸°ë¡</h2>
            <div class="record-item">
                <span class="exercise-name">ğŸƒ ëŸ°ë‹ (10ë¶„)</span>
                <span class="exercise-count" id="running-record">0íšŒ</span>
            </div>
            <div class="record-item">
                <span class="exercise-name">ğŸ’ª íŒ”êµ½í˜€í´ê¸° (10íšŒ)</span>
                <span class="exercise-count" id="pushup-record">0íšŒ</span>
            </div>
            <div class="record-item">
                <span class="exercise-name">ğŸ¦µ ìŠ¤ì¿¼íŠ¸ (10íšŒ)</span>
                <span class="exercise-count" id="squat-record">0íšŒ</span>
            </div>
            <div class="record-item">
                <span class="exercise-name">ğŸ§˜ ìœ—ëª¸ì¼ìœ¼í‚¤ê¸° (20íšŒ)</span>
                <span class="exercise-count" id="situp-record">0íšŒ</span>
            </div>
        </div>

        <div class="total-summary">
            <h2>ğŸ“Š ì˜¤ëŠ˜ì˜ ìš´ë™ ì´í•©</h2>
            <div class="summary-item">
                <span>ğŸƒ ëŸ°ë‹</span>
                <span class="total-count" id="running-total">ì´ 0ë¶„</span>
            </div>
            <div class="summary-item">
                <span>ğŸ’ª íŒ”êµ½í˜€í´ê¸°</span>
                <span class="total-count" id="pushup-total">ì´ 0íšŒ</span>
            </div>
            <div class="summary-item">
                <span>ğŸ¦µ ìŠ¤ì¿¼íŠ¸</span>
                <span class="total-count" id="squat-total">ì´ 0íšŒ</span>
            </div>
            <div class="summary-item">
                <span>ğŸ§˜ ìœ—ëª¸ì¼ìœ¼í‚¤ê¸°</span>
                <span class="total-count" id="situp-total">ì´ 0íšŒ</span>
            </div>
        </div>

        <div class="stats">
            <h2>ğŸ“Š ì´ë²ˆ ë‹¬ í†µê³„</h2>
            <div class="stat-item">
                <span>ì´ ìš´ë™ì¼ìˆ˜</span>
                <span id="totalDays">0ì¼</span>
            </div>
            <div class="stat-item">
                <span>ì—°ì† ìš´ë™ì¼ìˆ˜</span>
                <span id="streakDays">0ì¼</span>
            </div>
            <div class="stat-item">
                <span>ì „ë‚  ëŒ€ë¹„ ë‹¬ì„±ë¥ </span>
                <span id="completionRate">0%</span>
            </div>
        </div>

        <button class="reset-button" onclick="resetToday()">ì˜¤ëŠ˜ ê¸°ë¡ ì´ˆê¸°í™”</button>
        <button class="reset-button" style="background-color: #9b59b6; margin-top: 10px;" onclick="resetAll()">ì „ì²´ ê¸°ë¡ ì´ˆê¸°í™”</button>
    </div>

    <script>
        let currentDate = new Date();
        let exerciseData = JSON.parse(localStorage.getItem('exerciseData')) || {};

        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        function displayDate(date) {
            const options = { month: 'long', day: 'numeric', weekday: 'short' };
            return date.toLocaleDateString('ko-KR', options);
        }

        function updateDateDisplay() {
            document.getElementById('currentDate').textContent = displayDate(currentDate);
            loadDayData();
            updateStats();
            updateTotalSummary();
        }

        function changeDate(direction) {
            currentDate.setDate(currentDate.getDate() + direction);
            updateDateDisplay();
        }

        function loadDayData() {
            const dateKey = formatDate(currentDate);
            const dayData = exerciseData[dateKey] || {};
            
            // ê° ìš´ë™ë³„ ì¹´ìš´íŠ¸ í‘œì‹œ
            document.getElementById('running-count').textContent = dayData.running || 0;
            document.getElementById('pushup-count').textContent = dayData.pushup || 0;
            document.getElementById('squat-count').textContent = dayData.squat || 0;
            document.getElementById('situp-count').textContent = dayData.situp || 0;
            
            // ì˜¤ëŠ˜ì˜ ê¸°ë¡ í‘œì‹œ
            document.getElementById('running-record').textContent = (dayData.running || 0) + 'íšŒ';
            document.getElementById('pushup-record').textContent = (dayData.pushup || 0) + 'íšŒ';
            document.getElementById('squat-record').textContent = (dayData.squat || 0) + 'íšŒ';
            document.getElementById('situp-record').textContent = (dayData.situp || 0) + 'íšŒ';
            
            // ì¹´ë“œ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            const cards = document.querySelectorAll('.exercise-card');
            cards[0].classList.toggle('active', (dayData.running || 0) > 0);
            cards[1].classList.toggle('active', (dayData.pushup || 0) > 0);
            cards[2].classList.toggle('active', (dayData.squat || 0) > 0);
            cards[3].classList.toggle('active', (dayData.situp || 0) > 0);
        }

        function incrementExercise(type, element) {
            const dateKey = formatDate(currentDate);
            
            if (!exerciseData[dateKey]) {
                exerciseData[dateKey] = {};
            }
            
            // í˜„ì¬ ê°’ì„ ê°€ì ¸ì˜¤ê³  1 ì¦ê°€
            exerciseData[dateKey][type] = (exerciseData[dateKey][type] || 0) + 1;
            
            // ì¹´ìš´íŠ¸ ë°°ì§€ ì—…ë°ì´íŠ¸
            const countBadge = document.getElementById(type + '-count');
            countBadge.textContent = exerciseData[dateKey][type];
            
            // ì˜¤ëŠ˜ì˜ ê¸°ë¡ ì—…ë°ì´íŠ¸
            document.getElementById(type + '-record').textContent = exerciseData[dateKey][type] + 'íšŒ';
            
            // ì¹´ë“œ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            element.classList.add('active');
            
            saveData();
            updateStats();
            updateTotalSummary();
        }

        function decrementExercise(type, element) {
            const dateKey = formatDate(currentDate);
            
            if (!exerciseData[dateKey] || !exerciseData[dateKey][type] || exerciseData[dateKey][type] <= 0) {
                return; // 0 ì´í•˜ë¡œ ë‚´ë ¤ê°€ì§€ ì•Šë„ë¡
            }
            
            // í˜„ì¬ ê°’ì„ ê°€ì ¸ì˜¤ê³  1 ê°ì†Œ
            exerciseData[dateKey][type] = exerciseData[dateKey][type] - 1;
            
            // ì¹´ìš´íŠ¸ ë°°ì§€ ì—…ë°ì´íŠ¸
            const countBadge = document.getElementById(type + '-count');
            countBadge.textContent = exerciseData[dateKey][type];
            
            // ì˜¤ëŠ˜ì˜ ê¸°ë¡ ì—…ë°ì´íŠ¸
            document.getElementById(type + '-record').textContent = exerciseData[dateKey][type] + 'íšŒ';
            
            // ì¹´ë“œ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸ (0ì´ë©´ ë¹„í™œì„±í™”)
            if (exerciseData[dateKey][type] === 0) {
                element.classList.remove('active');
            }
            
            saveData();
            updateStats();
            updateTotalSummary();
        }

        function updateTotalSummary() {
            const dateKey = formatDate(currentDate);
            const dayData = exerciseData[dateKey] || {};
            
            // í•´ë‹¹ ë‚ ì§œì˜ ìš´ë™ ë°ì´í„°ë§Œ ì‚¬ìš©
            const totalRunning = dayData.running || 0;
            const totalPushup = dayData.pushup || 0;
            const totalSquat = dayData.squat || 0;
            const totalSitup = dayData.situp || 0;
            
            // ì´í•© í‘œì‹œ ì—…ë°ì´íŠ¸ (í´ë¦­ íšŸìˆ˜ Ã— ê¸°ë³¸ ìš´ë™ëŸ‰)
            document.getElementById('running-total').textContent = `ì´ ${totalRunning}íšŒ (${totalRunning * 10}ë¶„)`;
            document.getElementById('pushup-total').textContent = `ì´ ${totalPushup}íšŒ (${totalPushup * 10}ê°œ)`;
            document.getElementById('squat-total').textContent = `ì´ ${totalSquat}íšŒ (${totalSquat * 10}ê°œ)`;
            document.getElementById('situp-total').textContent = `ì´ ${totalSitup}íšŒ (${totalSitup * 20}ê°œ)`;
        }

        function saveData() {
            localStorage.setItem('exerciseData', JSON.stringify(exerciseData));
        }

        function updateStats() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            
            let totalDays = 0;
            let completedDays = 0;
            let streak = 0;
            let currentStreak = 0;
            
            // ì›”ë³„ í†µê³„ ê³„ì‚°
            for (let d = new Date(firstDay); d <= lastDay; d.setDate(d.getDate() + 1)) {
                const dateKey = formatDate(d);
                if (exerciseData[dateKey]) {
                    const dayComplete = exerciseData[dateKey].running > 0 && 
                                      exerciseData[dateKey].pushup > 0 && 
                                      exerciseData[dateKey].squat > 0 && 
                                      exerciseData[dateKey].situp > 0;
                    
                    if (dayComplete) {
                        completedDays++;
                    }
                    
                    if (Object.keys(exerciseData[dateKey]).length > 0) {
                        totalDays++;
                    }
                }
            }
            
            // ì—°ì† ìš´ë™ì¼ìˆ˜ ê³„ì‚°
            let checkDate = new Date();
            checkDate.setHours(0, 0, 0, 0);
            
            while (true) {
                const dateKey = formatDate(checkDate);
                if (exerciseData[dateKey] && 
                    exerciseData[dateKey].running > 0 && 
                    exerciseData[dateKey].pushup > 0 && 
                    exerciseData[dateKey].squat > 0 && 
                    exerciseData[dateKey].situp > 0) {
                    currentStreak++;
                    checkDate.setDate(checkDate.getDate() - 1);
                } else {
                    break;
                }
            }
            
            // ì „ë‚  ëŒ€ë¹„ ë‹¬ì„±ë¥  ê³„ì‚°
            const todayKey = formatDate(currentDate);
            const yesterday = new Date(currentDate);
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayKey = formatDate(yesterday);
            
            let todayTotal = 0;
            let yesterdayTotal = 0;
            
            if (exerciseData[todayKey]) {
                todayTotal = (exerciseData[todayKey].running || 0) + 
                           (exerciseData[todayKey].pushup || 0) + 
                           (exerciseData[todayKey].squat || 0) + 
                           (exerciseData[todayKey].situp || 0);
            }
            
            if (exerciseData[yesterdayKey]) {
                yesterdayTotal = (exerciseData[yesterdayKey].running || 0) + 
                               (exerciseData[yesterdayKey].pushup || 0) + 
                               (exerciseData[yesterdayKey].squat || 0) + 
                               (exerciseData[yesterdayKey].situp || 0);
            }
            
            let completionRate = 0;
            if (yesterdayTotal > 0) {
                completionRate = Math.round((todayTotal / yesterdayTotal) * 100);
            } else if (todayTotal > 0) {
                completionRate = 100; // ì–´ì œ ìš´ë™ ì•ˆí–ˆê³  ì˜¤ëŠ˜ í–ˆìœ¼ë©´ 100%
            }
            
            document.getElementById('totalDays').textContent = `${completedDays}ì¼`;
            document.getElementById('streakDays').textContent = `${currentStreak}ì¼`;
            document.getElementById('completionRate').textContent = `${completionRate}%`;
        }

        function resetToday() {
            if (confirm('ì˜¤ëŠ˜ì˜ ìš´ë™ ê¸°ë¡ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const dateKey = formatDate(currentDate);
                delete exerciseData[dateKey];
                saveData();
                loadDayData();
                updateStats();
                updateTotalSummary();
            }
        }

        function resetAll() {
            if (confirm('ëª¨ë“  ìš´ë™ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                exerciseData = {};
                saveData();
                loadDayData();
                updateStats();
                updateTotalSummary();
            }
        }

        // ì´ˆê¸° ë¡œë“œ
        updateDateDisplay();
    </script>
</body>
</html>